<section class="order">
  <form class="order__form" [formGroup]="orderForm">
    <div class="order__columns">
      <div class="order__radio-group">
        <span>
          Rodzaj Płatności*
        </span>
        @for (paymentType of paymentTypes; track $index) {
        <div>
          <p-radioButton [value]="paymentType.value" formControlName="paymentType" [inputId]="paymentType.value" />
          <label [for]="paymentType.value">
            {{paymentType.label}}
          </label>
        </div>
        }
      </div>
      <div class="order__radio-group">
        <span>
          Typ Dostawy*
        </span>
        @for (deliveryType of deliveryTypes; track $index) {
        <div>
          <p-radioButton [value]="deliveryType.value" formControlName="deliveryType" [inputId]="deliveryType.value" />
          <label [for]="deliveryType.value">
            {{deliveryType.label}}
          </label>
        </div>
        }
      </div>
    </div>
    <div>
      <p-floatLabel>
        <p-calendar inputId="deliveryDate" formControlName="deliveryDate" inputId="calendar-24h" [showTime]="true" hourFormat="24" />
        <label for="deliveryDate">Termin dostawy</label>
      </p-floatLabel>
    </div>
    <h4>Adresy dostaw</h4>
    <app-recipient-form [recipientForm]="orderForm.controls.deliveryAddress"></app-recipient-form>
    <div class="order__allowed-users">
      <h4>Adresy osób, upoważnionych do używania kosiarki</h4>
      @for (recipientControl of orderForm.controls.recipients.controls; track $index) {
      <p class="order__user-number">{{$index + 1}}.</p>
      <div>
        <app-recipient-form [recipientForm]="recipientControl" [showRemoveButton]="$index > 0" (removeRecipientOutput)="removeRecipient($event)"></app-recipient-form>
      </div>
      }
      <p-button class="order__add-recipient-button" (click)="addNewRecipient()">Dodaj następnego użytkownika</p-button>
    </div>
    <div class="order__nav-buttons">
      <a routerLink="/" class="p-button order__button">
        Cofnij
      </a>
      <a href="/summary" class="p-button order__button" (click)="goToSummary($event)">
        Przejdź do podsumowania
      </a>
    </div>
  </form>
</section>
<p-toast />